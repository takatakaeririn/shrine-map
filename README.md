# 神社マップ

神社の位置情報と御朱印情報を地図上で確認できるWebアプリケーションです。
ユーザーは神社の検索、お気に入り登録、御朱印の有無によるフィルタリングを行うことができます。

未経験から開発エンジニア転職を目指すポートフォリオとして、
「状態管理」「UIと地図の連動」「パフォーマンスを意識した設計」 を意識して開発しました。

🔗 **URL**: https://transcendent-mooncake-849271.netlify.app/

---

## 概要

全国の神社データをGoogle Maps上に表示し、気になる神社をお気に入り登録・検索・御朱印の有無をフィルタリングできるアプリです。

マップとサイドバーが連動しており、地図操作・リスト選択どちらからでも神社の詳細情報にアクセスできます。

---

## 主な機能

| 機能 | 概要 |
|------|------|
| 神社マップ表示 | JSONデータをもとに神社をマップ上にピン表示 |
| 検索機能 | 神社名のキーワードで絞り込み |
| お気に入り登録 | 気になる神社をお気に入りに追加・解除 |
| 御朱印フィルター | 御朱印の有無によるフィルター機能 |
| サイドバー連動 | リスト選択 ↔ マップの詳細情報（InfoWindow）が連動 |

---

## 技術スタック

- **TypeScript** - 型安全な開発
- **React** - UI構築
- **Vite** - 高速な開発・ビルド環境
- **Tailwind CSS** - スタイリング
- **Google Maps API** - 地図表示

---


## 工夫した点・苦労した点

### ① お気に入り機能の状態管理（localStorageとの同期）
お気に入り機能では、ブラウザをリロードしても状態が保持されるよう
`localStorage`とReactのstateを同期させる必要がありました。

初回レンダリング時に`localStorage`から値を取得するため、
`useState`のlazy initializationを用いて不要な再レンダリングを防ぎました。

また、`useEffect`を使用してstate変更時に`localStorage`へ同期する設計にすることで、
UIの即時反映と永続化を両立しました。

### ② サイドバーのリスト選択と地図の連動
サイドバーで神社を選択した際に、当該座標への移動、詳細情報（InfoWindow）が開くよう連動処理を実装しました。

選択された神社を`selectedShrine`として親コンポーネントで一元管理し、Mapコンポーネント側では`useEffect`を用いて状態変化を検知して地図の`panTo`を実行することで、UIと地図の連動を実現しました。

### ③ 検索機能のフィルタリング処理
入力値に応じてリアルタイムに神社リストを絞り込む処理を実装しました。

検索では、
- 前後の空白削除
- 大文字小文字の正規化
- `name`/`kana`両方への部分一致検索

を行うことで、かな入力にも対応した検索機能を実装しました。

### ④ Map操作時の詳細情報の制御
地図をドラッグした際に、InfoWindowが意図せず残留したり、表示が崩れないよう制御処理を追加しました。

Mapの`onDragstart`イベントを検知し`selectedShrine`を`null`にすることでInfoWindowを閉じる設計としました。

---

## 今後の改善課題

技術的な課題として以下を認識しており、今後対応予定です。

1. **検索精度の向上**  
   現在は入力文字を「含む」かどうかで検索しています。将来的には前方一致検索への、検索UXの改善を検討しています。

2. **表示パフォーマンスの最適化とデータ取得方法の改善**

    現在はJSONファイルに格納された神社データを全件取得し、
    フロントエンド側で描画を行っています。

    しかし、データ数の増加に伴い初期ロード時間の増加や
    描画パフォーマンスの低下が懸念されるため、

    今後はPythonを用いたAPIを実装し、
    SQLデータベースから地図の表示範囲（bounds）内に存在する
    神社データのみを取得する構成へ変更したいと考えています。

    これにより、

    - 初期ロード時のデータ取得量の削減
    - 描画パフォーマンスの向上
    - データの動的な追加・更新への対応

    が可能となり、スケーラビリティを考慮した設計への改善を見込んでいます。


---

## アプリイメージ
![アプリイメージ](https://github.com/user-attachments/assets/065c8e09-b50a-49d0-a707-c4028a983bb7)
![アプリイメージ](https://github.com/user-attachments/assets/e1b1d652-a445-47db-91e9-a6fd3e2e845a)

---

## 制作背景
前職では約6年間、経理業務に従事していました。
業務の中で「効率化」や「仕組みづくり」に興味を持ち、
自らHTML/CSSの学習を開始したことをきっかけに
Web開発分野へのキャリアチェンジを志しました。

本アプリでは、実務でも重要となる

- 状態管理
- UIとロジックの分離
- 永続化処理
- パフォーマンス改善

といった観点を意識して設計・実装を行いました。